function getFilterString(){return $("#filter_category_container select").map(function(){return 0==this.value?-1:this.value}).toArray().toString()}function Cg(e,t,r){this.id=e,this.wording=t,this.idx=r}function setFilterFunctionaliteit(){state.toecomsString=localUtils.getDataString("theToecoms"),state.nrOfCombos=parseInt(localUtils.getDataString("nrOfCombos")),state.nrOfFasen=parseInt(localUtils.getDataString("nrOfFasen")),toecomsUtils.setToecomsAndAfstudeerrichtingenFromString(state.toecomsString),toecomsUtils.setInitialCgIdsPerAantalInToecoms(),toecomsUtils.setCgsInToecoms(),toecomsUtils.deriveToecomsWithLowerNumberOfCgs(),initScreen(),cgSelector.bindOnChange(),cgSelector.bindOnReset(),faseSelector.bindOnChange(),url.bindOnChange()}function dev(){document.URL.indexOf("localhost")<0||($("#afstudeerrichting").html(location.referer+"."),console.log(HtmUtils.setUrlEncodedHashKey("test","1","foo=bar")))}function adaptLongScreenForTab(){var e=parseInt($("html").attr("class").split("version")[1]);if(!(34>e)){var t=getHiddenElementHeight($("#tab_voorwaarden_content")[0]);console.log(t),t>400?($("#tab_voorwaarden_content div#show_more").removeClass("full").addClass("gradient"),$("#tab_voorwaarden_content").removeClass("full").addClass("gradient"),$("#tab_voorwaarden_content div#show_more").click(function(){$("#tab_voorwaarden_content div#show_more").toggleClass("gradient").toggleClass("full"),$("#tab_voorwaarden_content").toggleClass("gradient").toggleClass("full")})):($("#tab_voorwaarden_content div#show_more").removeClass("gradient").addClass("full"),$("#tab_voorwaarden_content").removeClass("gradient").addClass("full"))}}function ImgError(){return $("a[rel='tab_opbouw']").parent().parent().hide(),!0}function f(e,t){semester=+e;var r=0,n=1===e?[2,3]:[1,3];for(3===e&&(semesterToHide=[1,2]),r=0;r<n.length;r+=1)$("img[src$='-"+n[r]+".png']").closest("tr").hide();void 0!==t&&$(".sp").filter(function(e,r){return parseInt(r.innerHTML,10)!=t}).closest("tr").hide()}var HtmUtils={getPureUrl:function(e){var e=e||location.href;return-1!==e.indexOf("?")&&(e=e.substr(0,e.indexOf("?"))),-1!==e.indexOf("#")&&(e=e.substr(0,e.indexOf("#"))),e},updateHrefFromDynamicAnchors:function(){$("a.dynamic").each(function(){var e=$(this);""==e.attr("data-href")&&e.attr("data-href",HtmUtils.getPureUrl(e.attr("href")));var t=e.attr("data-href")+"?"+e.attr("data-query")+location.hash;t=t.replace("%hash%",location.hash.replace("#","")),e.attr("href",t)})},getURLHashParameter:function(e){return decodeURI((RegExp("[#|&]"+e+"=(.+?)(&|$)").exec(location.hash)||[,null])[1])},getUrlEncodedHashKey:function(e,t){t||(t=window.location.hash);var r=new RegExp("[#|&]"+e+"=(.*?)&"),n=r.exec(t+"&");return!n||n.length<2?"":decodeURIComponent(n[1].replace("+"," "))},deleteKeyFromUrlHash:function(){var e=location.hash;delete e[pKeyName],location.hash=e,HtmUtils.updateHrefFromDynamicAnchors()},setUrlEncodedHashKey:function(e,t,r){r=r||window.location.hash;var n=r+"&",a=new RegExp("[#|&]"+e+"=.*?&");return a.test(n)?n=n.replace(a,"&"+e+"="+encodeURIComponent(t)+"&"):n+=e+"="+encodeURI(t),n=HtmUtils.trimStart(n,"&"),n=HtmUtils.trimEnd(n,"&"),"#"==n[0]?n:n="#"+n},setHashKey:function(e,t,r){r=r||window.location.hash;var n=r+"&",a=new RegExp("[#|&]"+e+"=.*?&");return a.test(n)?n=n.replace(a,"&"+e+"="+t+"&"):n+=e+"="+encodeURI(t),n=HtmUtils.trimStart(n,"&"),n=HtmUtils.trimEnd(n,"&"),"#"==n[0]?n:n="#"+n},getHashKey:function(e,t,r){return setHashKey(e,t,r)},escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\/\\]/g,"\\$0")},trimStart:function(e,t){return t?e.replace(new RegExp(HtmUtils.escapeRegExp(t)+"*"),""):e.replace(/^\s+/,"")},trimEnd:function(e,t){return t?e.replace(new RegExp(HtmUtils.escapeRegExp(t)+"*$"),""):e.replace(/\s+$/,"")},getOptionValues:function(e){var t=[];return $(e+" option").each(function(){t.push($(this).val())}),t},jqDomNodesToInnertextArray:function(e){var t=[];return e.each(function(){t.push(this.innerText)}),t}},oa={isArrayInArray:function(e,t){for(i in e)if(!oa.inArray(t,e[i]))return!1;return!0},range:function(e,t){ret=[];for(var r=e;t>=r;r++)ret.push(r);return ret},getHashClone:function(e){var t={};for(var r in e)t[r]=oa.getArrayClone(e[r]);return t},getArrayClone:function(e){if(!oa.isArray(e))return e;var t=[];for(var r in e)t.push(e[r]);return t},popAllArraysInHash:function(e){var t=e;for(var r in t)t[r].pop();return t},map:function(e,t){var r=[];for(var n in e)r[n]=t(e[n],n);return r},hashGetVals:function(e){var t=[];for(var r in e)t.push(e[r]);return t},hashGetKeys:function(e){retArr=[];for(var t in e)retArr.push(t);return retArr},hashToString:function(e){return oa.hashToArray(e).toString()},hashToArray:function(e){var t=[];for(var r in e)t.push(r),t.push(e[r]);return t},hashToFlatArray:function(e){var t=[];for(var r in e){t.push(r);var n=e[r];t=t.concat(n)}return t},turningHash:function(e){var t=this.uniqueValuesInHash(e),r={};for(var n in t){var a=[],s=t[n];for(var o in e)this.inArray(e[o],s)&&this.arrayPushNew(a,o);r[s]=a}return r},uniqueValuesInHash:function(e){var t,r,n=[];for(t in e)for(r in e[t])this.arrayPushNew(n,e[t][r]);return n.sort()},size:function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r},objectLiteralToArray:function(e){var t=[];for(var r in e)t.push(e[r]);return t},arrayPushNewArray:function(e,t){for(i in t)oa.arrayPushNew(e,t[i])},arrayPushNew:function(e,t){oa.inArray(e,t)||e.push(t)},arrayAsNumeric:function(e){var t=[];for(i=0;i<e.length;i++)t.push(parseInt(e[i]));return t},areEqualStringIntArrays:function(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++){var n=parseInt(e[r]),a=parseInt(t[r]);if(e[r]!=t[r]&&n!=a)return!1}return 0==e.length?!1:!0},arrayFlattenUnique:function(e){var t=[];for(var r in e)oa.arrayPushNewArray(t,e[r]);return t},arrayRemoveEmptyStrings:function(e){return this.arrayReduce(e,function(e){return""!=e})},arrayReduce:function(e,t){var r=[];for(var n in e)t(e[n])&&r.push(e[n]);return r},inArray:function(e,t){if(-1!=$.inArray(t,e))return!0;if(isNaN(parseInt(t)))return!1;var r=oa.arrayAsNumeric(e),n=-1!=$.inArray(parseInt(t),r);return n},array1MinusArray2:function(e,t){for(var r=[],n=!1,a=0;a<e.length;a++){n=!1;for(var s=0;s<t.length;s++)e[a]==t[s]&&(n=!0);n||r.push(e[a])}return r},csvToArray:function(e){return e.split(",")},csvToIntArray:function(e){var t=[],r=e.split(",");for(el in r)t.push(parseInt(r[el]));return t},arrayToCsv:function(e){return String(e)},isLoaded:function(){return!0},isArray:function(e){return-1==e.constructor.toString().indexOf("Array")?!1:!0},trim:function(e){return"string"!=typeof e?e:e=e.replace(/\s+$/,"")},arrayIntersection:function(e,t){resultArr=[];for(i in e)if("function"!=typeof e[i])for(ii in t)t[ii]!=e[i]||resultArr.push(e[i]);return resultArr},arraysHaveIntersection:function(e,t){if(0==e.length||0==t.length)return!1;for(i in e)for(ii in t)if(e[i]==t[ii]&&"function"!=typeof e[i])return!0;return!1},arraysHaveIntersectionRaw:function(e,t){if(0==e.length||0==t.length)return!1;for(i in e)for(ii in t)if(e[i]==t[ii])return!0;return!1},getXmlUrl:function(e){var t=window.location.pathname,r=t.lastIndexOf("/"),n=t.substr(0,r),a=t.substr(r),s="ECTS"===e?8:12;return n+"/xml"+a.substr(0,s)+".xml"},initGeneral:function(e){$("body").dblclick(function(t){t.ctrlKey&&(document.location=oa.getXmlUrl(e))}),fixes.addPdfClasses(e),fixes.rebindPdfLinks()}},fixes={addPdfClasses:function(){var e=location.search.lastIndexOf("pdf=1")>0;e&&($("body").addClass("pdf"),$("<link/>",{rel:"stylesheet",type:"text/css",href:"/resources/css/programmagids-pdf.css"}).appendTo("head"))},rebindPdfLinks:function(){$("a[href*='scriptpdf']").click(function(e){e.preventDefault();var t=e.srcElement.href.replace("/scriptpdf/","/pdf/");window.location.href=t})}},global_ignoreHasChange=!1;window.console||(console={log:function(){}}),function(e){e.fn.tabswitch=function(t){function r(){e(a).find(s.tab_selector).filter(":not("+s.notab_selector+")").find("a:not(regular)").bind("click",n)}function n(t){t.preventDefault();var r=e(this).attr("rel"),n=e(this).closest(s.tab_selector),o=e(a).find("#"+r+s.tab_content_id_suffix);n.siblings(s.tab_selector).removeClass("active"),o.siblings(s.tab_content_selector).removeClass("active"),n.addClass("active"),o.addClass("active"),start=r.indexOf("_")+1,end=r.length,str_hash=HtmUtils.setUrlEncodedHashKey("activetab",r.substr(start,end),location.hash),global_ignoreHasChange=!0,location.hash=str_hash,HtmUtils.updateHrefFromDynamicAnchors()}var a=this,s={},o={tab_selector:".tab",tab_content_selector:".tab_content",tab_content_id_suffix:"_content",notab_selector:".notab",max_distance:null};return s=e.extend({},o,t),r(),e(this)}}(jQuery);var TabController=function(e){function t(e){a=e.parent_selector,s=e.tab_selector,o=e.notab_selector,i=e.content_selector,l=e.content_id_suffix,""!==window.location.hash&&n(HtmUtils.getURLHashParameter("activetab")),$(a+" "+s+" li:not("+o+")").find("a").bind("click",r)}function r(e){e.preventDefault(),n($(this).attr("id"))}function n(e){if(!(gv_otype="INST")){$(a+" "+s+" li").removeClass("active"),$(a+" "+i).removeClass("active"),$("#"+e).closest("li").addClass("active"),$("#"+e+l).addClass("active");var t=HtmUtils.setUrlEncodedHashKey("activetab",e,location.hash);location.hash=t,HtmUtils.updateHrefFromDynamicAnchors()}}var a="",s="",o="",i="",l="";return t(e),{}},BoxController=function(e){function t(){var e=function(e){return $("div.columns h"+e+"  a.user_link_open:not(.user_link_closed)").map(function(t,r){return $(r).closest("div.columns").find("h"+e+".mandatory").index($(r).parent())}).toArray().toString()};return e("3")+";"+e("4")}function r(e){c=e.parent_selector,u=e.handle_selector,d=e.show_all_selector,f=e.hide_all_selector,n(),"FAC"!=e.caller&&i()}function n(){$(c).find(u).bind("click",a),$(c).find(d).find("a").bind("click",o),$(c).find(f).find("a").bind("click",l)}function a(e){if(e.preventDefault(),!$(this).hasClass("fp-notselected")){if($(this).find("a:not(regular)").toggleClass("user_link_closed").toggleClass("user_link_open"),$(this).next("[class^=level_]").toggleClass("user_target_closed"),"INST"===gv_otype){var r;r=HtmUtils.setHashKey("bl",t()),r=HtmUtils.setHashKey("f",getFilterString(),r),location.hash=r}if("SC"==gv_otype){var n=$(".user_link_open").closest(".cg").map(function(){return this.getAttribute("data-level").split("_")[1].substring(2)}).get().join(",");global_ignoreHasChange=!0,location.hash=HtmUtils.setHashKey("bl",n),HtmUtils.updateHrefFromDynamicAnchors()}s()}}function s(){$(".level_2").removeClass("user_target_closed"),0===$(".user_target_closed").length?($(c).find(d).hide(),$(c).find(f).show()):($(c).find(d).show(),$(c).find(f).hide())}function o(e){e&&e.preventDefault(),$(c).find(u).find("a:not(regular)").removeClass("user_link_closed").addClass("user_link_open"),$("[class^=level_]").removeClass("user_target_closed"),$(c).find(d).hide(),$(c).find(f).show(),global_ignoreHasChange=!0,location.hash=HtmUtils.setHashKey("bl","all"),HtmUtils.updateHrefFromDynamicAnchors()}function i(e){e&&e.preventDefault(),$(c).find(u).find("a:not(regular)").addClass("user_link_closed").removeClass("user_link_open"),$("[class^=level_]").addClass("user_target_closed"),$(c).find(f).hide(),$(c).find(d).show(),global_ignoreHasChange=!0,HtmUtils.updateHrefFromDynamicAnchors()}function l(e){e&&e.preventDefault(),$(c).find(u).find("a:not(regular)").addClass("user_link_closed").removeClass("user_link_open"),$("[class^=level_]").addClass("user_target_closed"),$(c).find(f).hide(),$(c).find(d).show(),global_ignoreHasChange=!0,location.hash=HtmUtils.setHashKey("bl","0").replace("&bl=0","").replace("bl=0",""),HtmUtils.updateHrefFromDynamicAnchors()}var c="",u="",d="",f="";return r(e),{showAllLevels:o,hideAllLevels:i}},setTooltips=function(){var e=function(){var e=0;return function(){return e+=1}}()();$("#main_container.traject div.tooltip").show().wrap('<div class="tooltip_container">').before('<div class="tooltip_rarrow">'),$("#main_container.traject a").bind("mouseover",function(e){$("div.tooltip_container").hide();var t=$("#"+$(this).attr("rel"));t.css({position:"absolute",top:$(this).offset().top-t.outerHeight(!1)/2+5,left:$(this).offset().left-t.outerWidth(!0)-20}).addClass("active").show(),e.preventDefault()}).bind("mouseout",function(e){var t=$("#"+$(this).attr("rel"));t.removeClass("active"),setTimeout(function(){!1===t.hasClass("active")&&t.hide()},1e3),e.preventDefault()}),$("#legende_view div.tooltip").show().wrap('<div class="tooltip_container">').after('<div class="tooltip_larrow">'),$("#legende_view a").bind("mouseover",function(e){$("div.tooltip_container").hide();var t=$("#"+$(this).attr("rel"));t.css({position:"absolute",top:$(this).offset().top-t.outerHeight(!1)/2+5,left:$(this).offset().left+$(this).outerWidth(!0)}).addClass("active").show(),e.preventDefault()}).bind("mouseout",function(e){var t=$("#"+$(this).attr("rel"));t.removeClass("active"),0==t.hasClass("active")&&t.hide(),e.preventDefault()}),$("div.tooltip_container").bind("mouseover",function(e){var t=$(this);t.addClass("active").show(),e.preventDefault()}).bind("mouseout",function(e){var t=$(this);t.removeClass("active"),!1===t.hasClass("active")&&t.hide(),e.preventDefault()}).each(function(){var t=$(this),r=e++;t.attr("id","tooltip_"+r),t.prev("a").attr("rel","tooltip_"+r)}).hide().appendTo($("body"))},setTabsAndBoxes=function(e){if("INST"!=e&&"FAC"!=e)$("#main_container").tabswitch({tab_selector:".tab",tab_content_selector:".tab_content",tab_content_id_suffix:"_content",notab_selector:".notab",max_distance:5});else{new TabController({parent_selector:"#main_container",tab_selector:".tabs",notab_selector:".no_tab",content_selector:".tab_content",content_id_suffix:"_content"})}var t=new BoxController({parent_selector:"#main_container",handle_selector:"h3, h4, h5, h6",show_all_selector:"#show_all",hide_all_selector:"#hide_all",caller:e});("FAC"==e||"INST"==e&&gv_ispdf)&&t.showAllLevels()};!function(e){e.fn.hoverscroll=function(t){var t=e.extend({},{offset:0,"z-index":999999},t);return this.each(function(){var r=e(this);r.length>0&&($wrapper=e('<div class="hoverscroll_wrapper"></div>'),$wrapper.insertAfter(r).append(r).css({position:"absolute",top:r.css("margin-top")+"px",left:r.css("margin-left")+"px",width:r.innerWidth()+"px",height:r.outerHeight()+"px"}),e(document).bind("scroll",function(t,r,n){var a=t.offset().top;return function(){r.css(e(window).scrollTop()+n.offset>a?{position:"fixed",top:n.offset,width:r.width(),"z-index":n["z-index"]}:{position:"relative",top:"",width:""})}}($wrapper,r,t)),$wrapper.css("position","relative"))})}}(jQuery);var setScrollItems=function(){$("#hover_selectie_content, #hover_share_content").hoverscroll(),$("#hover_legend_content").hoverscroll({offset:$("#hover_share_content").parent().outerHeight()})},uurrooster={getUrl:function(){var e=$("div#datadiv").attr("data-jaar"),t=$("div#datadiv").attr("data-lang"),r=$("div#datadiv").attr("data-objid"),n="http://www.kuleuven.be/sapredir/uurrooster/keuze_studiejaar.htm";window.location.host.indexOf("halotest")>0&&(n="https://webwsq.aps.kuleuven.be/sap(bD1ubCZjPTIwMA==)/public/bsp/sap/z_mijnuurrstrs/keuze_studiejaar.htm");var a=state.getArrayFromGekozenCgs().toString(),s="?OBJID_SC="+r+"&TAAL="+t+"&SEL_JAAR="+e;return 1===state.getFasenAsArray().length&&(s+="&STUDIEJAAR="+state.getFasenAsArray().toString()),""!==a&&(s+="&CGS_NEW="+a),n+s},popup:function(){var e=uurrooster.getUrl();document.open(e,"uurrooster","location=0,scrollbars=yes,toolbar=no, dependent=yes, screenX=50,screenY=50,height=500,resizable=yes,width=800,status=no,menubar=0")},bindOnChange:function(){$("div#show_uurrooster_container a").click(function(e){e.preventDefault(),uurrooster.popup()})},init:function(){uurrooster.bindOnChange()}};Cg.prototype.getOptionTag=function(){return"<option value='"+this.id+"'>"+this.wording+"</option>"};var url,state;url={setFromState:function(){url.adaptUrlCgs2State()},adaptUrlCgs2State:function(){var e,t=state.getArrayFromGekozenCgs();global_ignoreHasChange=!0,location.hash=HtmUtils.setHashKey("cgs",t),0===t.length&&(e=location.hash.replace("&cgs=","").replace("cgs=",""),global_ignoreHasChange=!0,location.hash=e),HtmUtils.updateHrefFromDynamicAnchors()},adaptUrlFasen2State:function(){var e=state.getFasenAsArray();global_ignoreHasChange=!0,0===e.length&&(location.hash=HtmUtils.setHashKey("fasen",0)),e.length>0&&(location.hash=HtmUtils.setHashKey("fasen",e)),HtmUtils.updateHrefFromDynamicAnchors()},getCgs:function(){var e=HtmUtils.getURLHashParameter("cgs");return"null"===e?[]:e},getFasen:function(){var e=HtmUtils.getURLHashParameter("fasen");return void 0===e||"null"===e?oa.range(1,state.nrOfFasen):oa.csvToIntArray(e)},getBlocks:function(){var e=HtmUtils.getURLHashParameter("bl");return void 0===e||"null"===e?[]:oa.csvToArray(e)},bindOnChange:function(){$(window).bind("hashchange",function(){global_ignoreHasChange||initScreen(),global_ignoreHasChange=!1})}},state={toecomsString:"",toecoms:{},CgIdsPerAantalInToecoms:{},afstudeerrichtingen:{},nrOfCombos:0,nrOfFasen:0,gekozenCgIds:{1:"0",2:"0",3:"0"},changeGekozenCgIds:function(e,t){state.gekozenCgIds[e]=t;for(var r=e+1;r<=state.nrOfCombos;r++)state.gekozenCgIds[r]="0"},resetGekozenCgIds:function(){state.gekozenCgIds={1:"0",2:"0",3:"0"}},getAantalGekozenCgs:function(){return"0"===state.gekozenCgIds[1]?0:"0"===state.gekozenCgIds[2]?1:"0"===state.gekozenCgIds[3]?2:"0"!==state.gekozenCgIds[3]?3:"-1"},getArrayFromGekozenCgs:function(){return oa.arrayReduce(oa.hashGetVals(state.gekozenCgIds),function(e){return"0"!==e})},setGekozenCgsFromArray:function(e){var t,r,n;for(0===e.length&&state.resetGekozenCgIds(),t=0;t<e.length;t++)n=e[t],state.gekozenCgIds[t+1]=n;for(r=e.length+1;r<=state.nrOfCombos;r++)state.gekozenCgIds[r]="0"},getCgsAsQueryString:function(){var e=state.getArrayFromGekozenCgs();return"cgs="+e},adaptCgsToUrl:function(){var e,t=[];e=HtmUtils.getURLHashParameter("cgs"),t=oa.csvToArray(e),"null"===e&&(t=[]),state.setGekozenCgsFromArray(t)},fasen:{},getFasenAsArray:function(){var e,t=[];for(e in state.fasen)state.fasen[e]&&t.push(parseInt(e,10));return t},resetFasen:function(){for(var e=1;e<=state.nrOfFasen;e++)state.fasen[e]=!1},adaptFasenToUrl:function(){state.resetFasen();var e=url.getFasen();for(idx in e){nr=e[idx];var t=0===nr;if(t)return;state.fasen[nr]=!0}},adaptBlocksToUrl:function(){if(blocks=url.getBlocks(),0!==blocks.length){if("all"==blocks[0])return void $.each($(".cg"),function(e,t){$(t).find("a").first().addClass("user_link_open").removeClass("user_link_closed").parent().next().removeClass("user_target_closed")});$.each($(".cg"),function(e,t){$(t).find("a").first().addClass("user_link_closed").removeClass("user_link_open").parent().next().removeClass("user_target_open")}),blocks=oa.map(blocks,function(e){return"idx_01"+e});for(idx in blocks){block=blocks[idx];var e=$(".cg[data-level='"+block+"']");e.find("a").eq(0).addClass("user_link_open").removeClass("user_link_closed").parent().next().removeClass("user_target_closed")}}},cgsInToecoms:{},cgsAll:{}};var toecomsUtils={setToecomsAndAfstudeerrichtingenFromString:function(e){var t=e;t=t.replace(/^\s+|\s+$/g,"");var r=oa.arrayRemoveEmptyStrings(t.split("-_sep3_-")),n={},a={};for(var s in r){var o=r[s].split("-_sep1_-"),i=o[0],l=o[1].split("-_septitel_-")[1],c=o[1].split("-_septitel_-")[0],u=oa.arrayRemoveEmptyStrings(l.split("-_sep2_-"));u.sort(),a[u.toString()]=c,n[i]=u}state.toecoms=n,state.afstudeerrichtingen=a},setCgsInToecoms:function(){var e=$(".cg");e.each(function(e,t){var r=t.id,n=$(t).find("a").eq(0).text(),e=localUtils.getDataString(r,"level").split("_")[1],a=new Cg(r,n,e);state.cgsAll[t.id]=a,$(t).hasClass("verplichtN")&&(state.cgsInToecoms[t.id]=a)})},setInitialCgIdsPerAantalInToecoms:function(){var e={0:[],1:[],2:[],3:[]};for(toecomIdx in state.toecoms){var t=state.toecoms[toecomIdx];oa.arrayPushNewArray(e[t.length],t)}state.CgIdsPerAantalInToecoms=e},getToecomsForCgSArray:function(e){var t=[],r="";for(r in state.toecoms){var n=state.toecoms[r];oa.isArrayInArray(e,n)&&t.push(r)}return t},deriveToecomsWithLowerNumberOfCgs:function(){duosEmptyTripletsNot=0==state.CgIdsPerAantalInToecoms[2].length&&state.CgIdsPerAantalInToecoms[3].length>0,duosEmptyTripletsNot&&(state.CgIdsPerAantalInToecoms[2]=state.CgIdsPerAantalInToecoms[3]),noSingletonToecoms=0==state.CgIdsPerAantalInToecoms[1].length,noSingletonToecoms&&(state.CgIdsPerAantalInToecoms[1]=state.CgIdsPerAantalInToecoms[2])},arrayHasUniqueElements:function(e){try{if(1==e.length)return!0}catch(t){console.log(t)}for(var r=0;r<e.length;r++)for(var n=r+1;n<e.length;n++)if(e[r]==e[n])return!1;return!0},cgsAreInSameToecom:function(e){if(!toecomsUtils.arrayHasUniqueElements(e))return!1;var t=toecomsUtils.getToecomsForCgSArray(e);return t.length>0},cgCanBeInCombobox:function(e,t){if(0==state.getAantalGekozenCgs())return!0;if(1==t)return!0;var r=state.gekozenCgIds[1];if(2==t)return toecomsUtils.cgsAreInSameToecom([e,r])?!0:!1;var n=state.gekozenCgIds[2];return 3==t?toecomsUtils.cgsAreInSameToecom([e,r,n])?!0:!1:void 0}},localUtils={getDataString:function(e,t){var r=void 0==t?"string":t,n="data-"+r;return $("#"+e).attr(n)}},faseSelector={init:function(){faseSelector.setDefaultAllSelected(),faseSelector.bindOnChange()},setDefaultAllSelected:function(){$(".check_fase").each(function(e,t){$(t).attr("checked",1),state.fasen[e+1]=!0})},bindOnChange:function(){$(".check_fase").change(function(){var e=this,t=e.id.split("_")[2],r="checked"==$(this).attr("checked");state.fasen[t]=r,faseSelector.setFromState(),view.setFasesFromState(),url.adaptUrlFasen2State()})},setFromState:function(){$.each(state.fasen,function(e,t){$("#check_fase_"+e).attr("checked",t)})}},cgSelector={init:function(){cgSelector.fillCombos(),cgSelector._setDisabledStates(),cgSelector.bindOnChange(),cgSelector.bindOnReset(),cgSelector.setFromState(),view.setCgsFromState(),view.displayAfstudeerrichting()},fillCombos:function(){for(var e=1;e<=state.nrOfCombos;e++){currentCgIds=state.CgIdsPerAantalInToecoms[e],$("#select_category_"+e).val(0),$("#select_category_"+e).find("optgroup option").remove(),cgs2add2currentCombobox=[];for(currentCgIndex in currentCgIds){var t=currentCgIds[currentCgIndex],r=state.cgsInToecoms[t];void 0===r&&console.log("fout : cg discrepantie, check cg "+t),toecomsUtils.cgCanBeInCombobox(t,e)&&cgs2add2currentCombobox.push(r)}cgs2add2currentCombobox.sort(function(e,t){return e.idx-t.idx});for(idx in cgs2add2currentCombobox){curcg=cgs2add2currentCombobox[idx];try{$("#select_category_"+e).find("optgroup").append(curcg.getOptionTag())}catch(n){console.log(n)}}}},bindOnChange:function(){$(".cg_selector").change(function(){var e=this,t=e.id,r=parseInt(t.charAt(t.length-1)),n=e.value;state.changeGekozenCgIds(r,n),cgSelector.setFromState(),view.setCgsFromState(),view.displayAfstudeerrichting(),url.adaptUrlCgs2State()})},bindOnReset:function(){$("#button_category_reset").click(function(){state.resetGekozenCgIds(),cgSelector.setFromState(),view.setFromState(),url.setFromState()})},_setDisabledStates:function(){$(".cg_selector").each(function(){0==this.value&&$(this).attr("disabled","disabled")}),$(".cg_selector[disabled=disabled]").eq(0).removeAttr("disabled")},setFromState:function(){cgSelector.fillCombos(),$(".cg_selector").each(function(e,t){var r=e+1;t.value=state.gekozenCgIds[r]}),cgSelector._setDisabledStates(),view.displayAfstudeerrichting()}},view={activateTabFromUrl:function(){var e=HtmUtils.getURLHashParameter("activetab");"null"!=e&&$("a[rel='tab_"+e+"']").click()},setStateFromUrl:function(){url.getCgs()},hideEmptyCgBlocks:function(){var e=state.getFasenAsArray();$(".cg").each(function(t,r){var n=oa.csvToIntArray($(r).attr("data-fases")),a=oa.arraysHaveIntersection(n,e);a&&$(r).addClass("fase_active").removeClass("fase_passive"),a||$(r).addClass("fase_passive").removeClass("fase_active"),("0"===$(r).attr("data-fases")||""===$(r).attr("data-fases"))&&$(r).removeClass("fase_passive").addClass("fase_active")})},displayAfstudeerrichting:function(){var e=state.getArrayFromGekozenCgs().sort(),t=oa.arrayToCsv(e),r=state.afstudeerrichtingen[t];(null==r||""==r)&&(r="&nbsp;"),$("#afstudeerrichting").html(r)},setFasesFromState:function(){if(0!==state.nrOfFasen){$("tr.opo_row").removeClass("fase_active").removeClass("fase_passive"),$("tr.opo_row").siblings().removeClass("fase_active").removeClass("fase_passive"),$.each(state.fasen,function(e,t){$("a.fase_"+e).parents("tr.opo_row").addClass("fase_"+(t?"active":"passive")).nextUntil("tr.opo_row").addClass("fase_"+(t?"active":"passive"))}),view.hideEmptyCgBlocks(),$(".fase_passive").hide(),$(".fase_active").show();var e=$("#header").hasClass("intranet");e||$(".intranet").hide(),$(".cg_passive").hide()}},setCgsFromState:function(){var e=state.getAantalGekozenCgs()>0;e?$("li.verplichtN").removeClass("cg_active").addClass("cg_passive"):$("li.verplichtN").removeClass("cg_passive").addClass("cg_active");for(var t in state.cgsInToecoms)gekozen_arr=state.getArrayFromGekozenCgs(),oa.arrayPushNew(gekozen_arr,t),result=toecomsUtils.cgsAreInSameToecom(gekozen_arr),result&&$("li#"+t).removeClass("cg_passive").addClass("cg_active");$(".cg_passive").hide(),$(".cg_active").show()},setFromState:function(){view.setCgsFromState(),view.setFasesFromState(),view.displayAfstudeerrichting()}},initScreen=function(){console.log("init"),state.adaptCgsToUrl(),state.adaptFasenToUrl(),state.adaptBlocksToUrl(),cgSelector.setFromState(),faseSelector.setFromState(),view.setFromState(),view.activateTabFromUrl()},getHiddenElementHeight=function(e){var t="tmp-"+Math.floor(99999*Math.random());return $(e).clone().css("position","absolute").css("height","auto").css("width","1000px").appendTo($(e).parent()).css("left","-10000em").addClass(t).show(),h=$("."+t).height(),$("."+t).remove(),h};$("document").ready(function(){setTabsAndBoxes(gv_otype),setScrollItems(gv_otype),setTooltips(),setFilterFunctionaliteit(),oa.initGeneral(gv_otype),uurrooster.init(),"function"==typeof lastCalledFunction&&lastCalledFunction()});